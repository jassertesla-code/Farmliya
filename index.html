<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>APP JOJO ♡ JASSER</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#0b0520; --bg2:#3a0066; --accent:#ff62b3; --paper:#fff8f5; --text-dark:#3b2340;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh;
    font-family:'Cairo',sans-serif;
    background: radial-gradient(800px 400px at 10% 10%, rgba(255,99,180,0.05), transparent),
                linear-gradient(180deg,var(--bg1),var(--bg2));
    color:#fff; display:flex; flex-direction:column; align-items:center; padding:28px;
    overflow:hidden;
  }

  /* ===== العنوان العلوي مع خط مركزي ثم ظهور النص ===== */
  .header {
    width:100%; max-width:920px; display:flex; justify-content:center; align-items:center; flex-direction:column;
    margin-top:6px;
  }
  .line {
    width:2px; height:0; background:linear-gradient(180deg,#ffb1de,#ff5fb4); border-radius:2px;
    opacity:0.9; transform-origin: top center;
    animation: drawLine 700ms ease forwards;
  }
  @keyframes drawLine { from {height:0;} to {height:60px;} }

  .title {
    margin-top:14px; font-size:32px; font-weight:900; letter-spacing:1px;
    opacity:0; transform: translateY(-6px);
    color: #fff;
    text-shadow: 0 8px 30px rgba(255,80,150,0.12);
    animation: fadeInTitle 900ms ease 500ms forwards;
  }
  @keyframes fadeInTitle { to {opacity:1; transform:none;} }

  .title .glow {
    display:inline-block;
    background: linear-gradient(90deg,#ffd6fb 0%, #ff9ad4 50%, #ffd6fb 100%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    filter: drop-shadow(0 6px 18px rgba(142,45,226,0.15));
  }

  /* heart with date inside */
  .heart {
    margin-top:8px;
    width:72px;height:72px;border-radius:999px;
    background:linear-gradient(180deg,#ff84c3,#ff4aa3);
    display:flex;align-items:center;justify-content:center;font-weight:900;color:#fff;
    box-shadow:0 14px 40px rgba(255,70,150,0.12);
    position:relative;
  }
  .heart .date { font-size:11px;font-weight:700; text-align:center; line-height:1; }

  /* ===== منطقة الصندوق والورقة ===== */
  .stage { width:100%; max-width:640px; margin-top:36px; display:flex; justify-content:center; align-items:center; position:relative; padding:20px; }
  .gift { width:260px; height:200px; position:relative; perspective:1200px; cursor:pointer; }
  /* قاعدة الصندوق */
  .box-base {
    width:100%; height:64%; background: linear-gradient(180deg,#3b002f,#210016);
    border-radius:14px; position:absolute; bottom:0; left:0; z-index:6;
    box-shadow: 0 26px 60px rgba(0,0,0,0.6);
    display:flex; align-items:center; justify-content:center; overflow:visible;
    transform-origin: center top; transition: transform 700ms cubic-bezier(.2,.95,.15,1), opacity 600ms ease;
  }
  .ribbon-vertical { position:absolute; left:50%; transform:translateX(-50%); width:40px; height:100%; border-radius:6px; background: linear-gradient(180deg,#ff9bd1,#ff4aa3); z-index:7; }
  .ribbon-horizontal { position:absolute; top:30%; left:0; width:100%; height:34px; border-radius:8px; background: linear-gradient(90deg,#ff9bd1,#ff4aa3); z-index:7; }
  .bow {
    position:absolute; top:-18px; left:50%; transform:translateX(-50%) rotate(-10deg); width:96px; height:56px; border-radius:20px;
    background: linear-gradient(180deg,#ffd1e8,#ff86c4); z-index:9; box-shadow: 0 8px 26px rgba(255,91,158,0.12);
  }
  .bow:before, .bow:after { content:""; position:absolute; width:36px; height:42px; background:inherit; border-radius:10px; top:8px;}
  .bow:before { left:6px; transform: rotate(-28deg); }
  .bow:after { right:6px; transform: rotate(28deg); }

  /* الغطاء (lid) */
  .box-lid {
    width:100%; height:50%; position:absolute; top:0; left:0; border-radius:14px; background: linear-gradient(180deg,#6f0045,#3a001f);
    transform-origin: top center; z-index:10; transition: transform 700ms cubic-bezier(.2,.95,.15,1), opacity 600ms ease;
    box-shadow: 0 26px 40px rgba(0,0,0,0.5);
  }

  /* الورقة (الملاحظة) */
  .note {
    position:absolute; left:50%; transform:translateX(-50%) translateY(8px) rotate(-8deg);
    top:44%; width:180px; padding:16px; background: var(--paper); color: var(--text-dark);
    border-radius:10px; box-shadow: 0 26px 60px rgba(0,0,0,0.35); opacity:0; z-index:4;
    transform-origin: bottom center; transition: all 900ms cubic-bezier(.2,.9,.2,1); text-align:center;
    font-weight:700; line-height:1.35;
  }

  /* ظهور الورقة واختفاء الصندوق */
  .opened .box-lid { transform: translateY(-20px) rotateX(65deg) scale(1.02); opacity:0; }
  .opened .box-base { opacity:0; transform: translateY(12px) scale(0.9); pointer-events:none; }
  .opened .note { opacity:1; top:-22%; transform:translateX(-50%) translateY(0) rotate(0deg); z-index:30; }

  /* الرسالة داخل الورقة */
  .message { font-size:15px; color:#4b2340; }
  .message .from { display:block; margin-top:10px; font-weight:900; color:#2b1840; font-size:15px; }

  /* confetti canvas */
  .confetti { position: fixed; inset:0; pointer-events:none; z-index:1000; }

  /* responsive */
  @media (max-width:480px){
    .gift { width:200px; height:150px; }
    .note { width:150px; top:44% }
    .title { font-size:24px }
    .heart { width:60px;height:60px }
  }
</style>
</head>
<body>

  <div class="header" aria-hidden="false">
    <div class="line" id="line"></div>
    <div class="title" id="titleText"><span class="glow">APP JOJO ♡ JASSER</span></div>
    <div style="margin-top:8px;">
      <div class="heart" aria-hidden="true">
        <div class="date" id="dateInHeart"></div>
      </div>
    </div>
  </div>

  <div class="stage">
    <div class="gift" id="giftCard" title="اضغط لفتح الهدية">
      <div class="box-lid" aria-hidden="true"></div>
      <div class="box-base" aria-hidden="true">
        <div class="ribbon-vertical"></div>
        <div class="ribbon-horizontal"></div>
        <div class="bow" aria-hidden="true"></div>
      </div>

      <div class="note" id="noteCard" role="dialog" aria-hidden="true">
        <div class="message" id="messageText"></div>
        <span class="from">— جَاسِر ❤</span>
      </div>
    </div>
  </div>

  <canvas class="confetti" id="confettiCanvas"></canvas>

<script>
/* ========= إعداد الرسائل اليومية ========= */
const messages = [
  "جوجو الحبيبة، كل يومٍ معكِ يكبر قلبي فرحًا — ابتسامتكِ نوري.",
  "حبيبتي جوجو، أنتِ الحلم الذي تحقّق في أيامي. أحبكِ بلا حدود.",
  "جوجو الغالية، كل لحظة بقربك أجمل من كل ما مرّ — وأنتِ سر سعادتي.",
  "إلى جوجو، يا أجمل نعمة، شكراً لوجودك؛ أحبكِ بكل نبضة في قلبي.",
  "جوجو، كلامي قد لا يكفيكِ، لكن قلبي يهديكِ عمراً من الحب والوفاء.",
  "يا جوجو، ضحكتكِ موسيقى تُنعش روحي — أنتِ لي كل المعاني.",
  "إلى جوجو، مع كل شروق أراكِ أجمل — لكِ وحدك قلبي وهواي.",
  "جوجو، وجودكِ يجعل كل يوم ينبض أملًا؛ أحبكِ فوق كل وصف.",
  "غاليتي جوجو، كنز قلبي أنتِ، كل يوم أحبك أكثر من البارحة.",
  "جوجو الحبيبة، معكِ تعلمتُ معنى السعادة الحقيقية — دمتِ لي نورًا."
];

// احسب فهرس الرسالة اعتماداً على التاريخ (ثابت لكل يوم)
function getDayIndex(date = new Date()){
  // نستخدم عدد الأيام منذ 1 يناير 1970
  const msPerDay = 24*60*60*1000;
  const days = Math.floor(date.getTime() / msPerDay);
  return days % messages.length;
}

// تحديث نص الرسالة في الصفحة حسب اليوم
function updateDailyMessage(){
  const idx = getDayIndex(new Date());
  const text = messages[idx];
  document.getElementById('messageText').innerHTML = text;
  // خزّن آخر تاريخ معروض (تنبيه لو أردت)
  localStorage.setItem('last_message_date', new Date().toDateString());
}

// جدولة التحديث عند منتصف الليل القادم
function scheduleMidnightUpdate(){
  const now = new Date();
  const tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate()+1);
  const msUntilMidnight = tomorrow.getTime() - now.getTime();
  setTimeout(()=>{
    updateDailyMessage();
    // بعد أول تحديث اضبط interval كل 24 ساعة
    setInterval(updateDailyMessage, 24*60*60*1000);
  }, msUntilMidnight + 100); // +100ms لتأمين
}

/* ========= ضبط التاريخ داخل القلب ========= */
const dateEl = document.getElementById('dateInHeart');
function showDate(){
  const d = new Date();
  dateEl.textContent = d.toLocaleDateString('ar-DZ', { year:'numeric', month:'long', day:'numeric' });
}
showDate();

/* ========= تهيئة الرسالة اليومية عند التحميل ========= */
updateDailyMessage();
scheduleMidnightUpdate();

/* ========= فتح الهدية: إخفاء الصندوق واظهار الورقة + confetti ========= */
const gift = document.getElementById('giftCard');
const confettiCanvas = document.getElementById('confettiCanvas');

let opened = false;
gift.addEventListener('click', openGift);

function openGift(){
  if(opened) return;
  opened = true;
  // إضافة صنف opened يؤدي لاختفاء الصندوق وظهور الورقة
  gift.classList.add('opened');
  // مؤثر Confetti
  launchConfetti();
}

/* ===== Confetti بسيط canvas ===== */
function launchConfetti(){
  try {
    const canvas = confettiCanvas;
    const ctx = canvas.getContext('2d');
    let W = canvas.width = window.innerWidth;
    let H = canvas.height = window.innerHeight;
    const pieces = [];
    const colors = ['#ff5fb4','#ffd166','#7afcff','#8b5cf6','#ff8a66','#ffd6fb'];

    for(let i=0;i<80;i++){
      pieces.push({
        x: Math.random()*W,
        y: Math.random()*H - H*0.4,
        r: 6 + Math.random()*10,
        d: Math.random()*40 + 10,
        color: colors[Math.floor(Math.random()*colors.length)],
        tilt: Math.random()*10 - 10,
        tiltAngle: Math.random()*Math.PI
      });
    }

    let t = 0;
    function draw(){
      ctx.clearRect(0,0,W,H);
      for(let p of pieces){
        p.tiltAngle += 0.05;
        p.y += Math.sin(t/10) + 2 + p.r/8;
        p.x += Math.sin(t/20);
        p.tilt = Math.sin(p.tiltAngle) * 15;
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.tilt * Math.PI/180);
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r*0.6);
        ctx.restore();
      }
      t++;
      if(t < 180) requestAnimationFrame(draw);
      else ctx.clearRect(0,0,W,H);
    }
    draw();
    window.addEventListener('resize', ()=>{ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; });
  } catch(e){
    console.warn('confetti not supported', e);
  }
}

/* ===== عند تحميل الصفحة شغّل الحركات الأولية (الخط ثم العنوان) ===== */
window.addEventListener('load', ()=> {
  // خط وظهور العنوان مُطبّقان عبر CSS animation عند التحميل
});
</script>
</body>
</html>
